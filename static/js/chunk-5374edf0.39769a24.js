(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5374edf0"],{"259d":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-card",{staticClass:"box-card"},[n("el-form",{ref:"form",attrs:{form:e.formData,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"设备编号："}},[n("el-input",{model:{value:e.formData.innerCode,callback:function(t){e.$set(e.formData,"innerCode",t)},expression:"formData.innerCode"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1)],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[n("el-table-column",[n("el-checkbox")],1),n("el-table-column",{attrs:{label:"序号",type:"index"}}),n("el-table-column",{attrs:{prop:"innerCode",label:"设备编号",width:"120"}}),n("el-table-column",{attrs:{prop:"type.name",label:"设备型号",width:"120"}}),n("el-table-column",{attrs:{prop:"node.name",label:"详细地址",width:"120"}}),n("el-table-column",{attrs:{prop:"ownerName",label:"合作商",width:"120"}}),n("el-table-column",{attrs:{label:"设备状态",width:"120",formatter:e.formatter}}),n("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(n){return e.handleChannelList(t.$index,t.row)}}},[e._v("货道")]),n("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(n){return e.handlePolicy(t.$index,t.row)}}},[e._v("策略")]),n("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(n){return e.handleEditVm(t.$index,t.row)}}},[e._v("修改")])]}}])})],1),n("el-pagination",{attrs:{layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.handleCurrentChange}}),n("b",{staticStyle:{color:"red"}},[n("span",[e._v("共"+e._s(e.pageInfo.totalCount)+"条记录 第 "+e._s(e.pageInfo.pageIndex)+"/"+e._s(e.pageInfo.totalPage)+" 页")])]),n("vmchannel",{attrs:{dialogVisible:e.dialogVisible,dataInfo:e.dataInfo,dataCount:e.dataCount,channelList:e.channelList,type:e.type},on:{close:e.onClose}}),n("vmpolicy",{attrs:{policyVisible:e.policyVisible,innerCodeList:e.innerCodeList},on:{close:e.onClose}}),n("vmeditvm",{attrs:{editvmVisible:e.editvmVisible,tableData:e.tableData,vmdata:e.vmdata,nodelist:e.nodelist},on:{close:e.onClose}})],1)},r=[],o=n("c7eb"),c=n("1da1"),i=n("7017"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"修改设备",visible:e.editvmVisible,width:"50%","before-close":e.handleClose}},[n("h4",[e._v("机器编号："+e._s(e.vmdata.innerCode))]),n("h4",[e._v("供货时间："+e._s(e.vmdata.lastSupplyTime))]),n("h4",[e._v("设备类型："+e._s(e.vmdata.type?e.vmdata.type.name:null))]),n("h4",[e._v("设备容量："+e._s(e.vmdata.type?e.vmdata.type.channelMaxCapacity:null))]),n("h4",[e._v(" 设备点位： "),n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.nodelist,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),n("h4",[e._v("合作商："+e._s(e.vmdata.node?e.vmdata.node.ownerName:null))]),n("h4",[e._v("所属区域："+e._s(e.vmdata.node?e.vmdata.node.addr:null))]),n("h4",[e._v("设备地址:"+e._s(e.vmdata.node?e.vmdata.node.name:null))]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("确 定")])],1)])},l=[],u={data:function(){return{value:"",options:[]}},props:{editvmVisible:{type:Boolean},tableData:{type:Array,required:!0},vmdata:{type:Object},nodelist:{type:Array}},created:function(){},methods:{handleClose:function(){this.$emit("close")},onSave:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["c"])(e.vmdata.node);case 2:n=t.sent,console.log(n),e.handleClose(),e.$parent.getStatus();case 6:case"end":return t.stop()}}),t)})))()}}},d=u,p=n("2877"),f=Object(p["a"])(d,s,l,!1,null,"3bb067c8",null),b=f.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"批量策略管理",visible:e.policyVisible,width:"50%","before-close":e.handleClose}},[n("el-form",{ref:"form",attrs:{model:e.formData,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"选择策略：",prop:"name"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return n("el-option",{key:e.policyId,attrs:{label:e.policyName,value:e.policyId}})})),1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSave()}}},[e._v("确 定")])],1)],1)},m=[],v={data:function(){return{formData:{},options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],value:""}},props:{policyVisible:{type:Boolean,required:!0},innerCodeList:{type:String}},created:function(){this.getPolicy()},methods:{handleClose:function(){this.$emit("close")},getPolicy:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["j"])();case 2:n=t.sent,console.log(n),e.options=n.data;case 5:case"end":return t.stop()}}),t)})))()},onSave:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var n,a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={innerCodeList:[e.innerCodeList],policyId:e.value},t.next=3,Object(i["a"])(n);case 3:a=t.sent,console.log(a),e.handleClose();case 6:case"end":return t.stop()}}),t)})))()}}},C=v,y=(n("b835"),Object(p["a"])(C,h,m,!1,null,"885ae3cc",null)),g=y.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{"append-to-body":!0,title:"货道设置",visible:e.dialogVisible,width:"50%","before-close":e.handleClose}},[n("p",[e._v(" 货道行数:"+e._s(e.type.type?e.type.type.vmRow:0)+" 货道列数:"+e._s(e.type.type?e.type.type.vmCol:0)+" 货道容量（个）:"+e._s(e.type.type?e.type.type.channelMaxCapacity:0)+" ")]),e._l(e.channelList,(function(t,a){return n("div",{key:a,staticStyle:{display:"inline-block",border:"1px solid blue"}},[n("span",[e._v(e._s(t.channelCode))]),n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.sku?t.sku.skuImage:"~@/assets/images/123.jpg"}}),n("p",{staticStyle:{"text-align":"center"}},[e._v(" "+e._s(t.sku?t.sku.skuName:"暂无商品")+" ")]),n("div",[n("el-button",{staticStyle:{color:"skyblue"},attrs:{size:"mini"},on:{click:function(n){return e.add(t,a)}}},[e._v("添加")]),n("el-button",{staticStyle:{color:"red"},attrs:{size:"mini"}},[e._v("删除")])],1)],1)})),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSave(e.formData)}}},[e._v("确 定")])],1),n("vmadd",{attrs:{Visible:e.Visible,channelCode:e.channelCode,innerCode:e.innerCode,channelList:e.channelList},on:{close:e.onClose}})],2)},O=[],k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{"append-to-body":!0,title:"选择商品",visible:e.Visible,width:"50%","before-close":e.handleClose}},[n("el-form",{ref:"form",attrs:{form:e.formData,"label-width":"90px"}},[n("el-form-item",{attrs:{label:"商品名称"}},[n("el-input",{model:{value:e.formData.skuName,callback:function(t){e.$set(e.formData,"skuName",t)},expression:"formData.skuName"}})],1),n("el-form-item",[n("el-button",{staticClass:"btn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1)],1),e._l(e.skuList,(function(t,a){return n("div",{key:a,staticStyle:{display:"inline-block",border:"1px solid blue"},on:{click:function(n){return e.check(t,a)}}},[t.isChecked?n("i",{staticClass:"el-icon-success"}):e._e(),n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.skuImage}}),n("p",{staticStyle:{"text-align":"center"}},[e._v(e._s(t.skuName))])],1)})),n("el-pagination",{attrs:{layout:"prev, next",total:e.totalCount},on:{"current-change":e.handleCurrentChange}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSave()}}},[e._v("确 定")])],1)],2)},w=[],x=(n("d3b7"),n("159b"),{data:function(){return{formData:{skuName:""},skuList:[],totalCount:30,pageInfo:{},skuId:""}},props:{Visible:{type:Boolean,required:!0},channelCode:{type:String,required:!0},innerCode:{type:String,required:!0},channelList:{type:Array,required:!0}},created:function(){this.getSku()},methods:{handleClose:function(){this.$emit("close")},onSave:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["d"])(e.innerCode,e.channelList);case 2:n=t.sent,console.log(n),e.handleClose();case 5:case"end":return t.stop()}}),t)})))()},getSku:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["m"])();case 2:n=t.sent,console.log(n),e.skuList=n.data.currentPageRecords,e.skuList.forEach((function(e){return e.isChecked=!1})),e.totalCount=parseInt(n.data.totalCount);case 7:case"end":return t.stop()}}),t)})))()},search:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["m"])("",e.formData.skuName);case 2:n=t.sent,console.log(n),e.skuList=n.data.currentPageRecords;case 5:case"end":return t.stop()}}),t)})))()},handleCurrentChange:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function n(){var a;return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("当前页: ".concat(e)),n.next=3,Object(i["m"])(e);case 3:a=n.sent,t.skuList=a.data.currentPageRecords,t.pageInfo.pageIndex=e;case 6:case"end":return n.stop()}}),n)})))()},check:function(e,t){this.skuList.forEach((function(e){return e.isChecked=!1})),e.isChecked=!e.isChecked,this.$set(this.skuList,t,e),this.editData=e,this.channelList.skuId=e.skuId,this.channelList.channelCode=this.channelCode}}}),_=x,I=(n("e0c6"),Object(p["a"])(_,k,w,!1,null,"524ad829",null)),L=I.exports,V={data:function(){return{Visible:!1,channelCode:"",innerCode:""}},props:{dialogVisible:{type:Boolean,required:!0},dataInfo:{type:Array,required:!0},channelList:{type:Array,required:!0},type:{type:Object,required:!0}},components:{vmadd:L},created:function(){},methods:{handleClose:function(){this.$emit("close")},onSave:function(e){return Object(c["a"])(Object(o["a"])().mark((function t(){var n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,Object(i["e"])(e);case 3:n=t.sent,console.log(n);case 5:case"end":return t.stop()}}),t)})))()},onClose:function(){this.Visible=!1},add:function(e,t){this.Visible=!0,this.channelCode=e.channelCode,this.innerCode=e.innerCode}}},S=V,D=Object(p["a"])(S,j,O,!1,null,"0997778f",null),P=D.exports,T={data:function(){return{tableData:[],totalCount:9,data:{},dialogVisible:!1,policyVisible:!1,editvmVisible:!1,dataInfo:[],dataCount:{},pageInfo:{},formData:{innerCode:""},innerCodeList:"",channelList:[],type:{},vmdata:{},nodelist:[]}},components:{vmchannel:P,vmpolicy:g,vmeditvm:b},created:function(){this.getStatus()},methods:{getStatus:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["n"])();case 2:n=t.sent,console.log(n),e.totalCount=parseInt(n.data.totalCount),e.tableData=n.data.currentPageRecords,e.pageInfo=n.data,console.log(e.tableData);case 8:case"end":return t.stop()}}),t)})))()},handleEdit:function(e,t){var n=this;return Object(c["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.dialogVisible=!0,e.next=3,Object(i["i"])(t.innerCode,"2020-01-01 00:00:00","2022-08-08 00:00:00");case 3:return n.dataCount.orderCount=e.sent.data,console.log(n.dataCount.orderCount),e.next=7,Object(i["h"])(t.innerCode,"2020-01-01 00:00:00","2022-08-08 00:00:00");case 7:return n.dataCount.orderAmount=e.sent.data,console.log(n.dataCount.orderAmount),e.next=11,Object(i["k"])(t.innerCode,"2020-01-01","2022-08-08",t.vmType,t.nodeId,t.createUserId);case 11:return n.dataCount.repairCount=e.sent.data,console.log(n.dataCount.repairCount),e.next=15,Object(i["o"])(t.innerCode,"2020-01-01","2022-08-08",t.vmType,t.nodeId,t.createUserId);case 15:return n.dataCount.supplyCount=e.sent.data,console.log(n.dataCount.supplyCount),console.log(n.dataCount),e.next=20,Object(i["l"])(t.innerCode,"2020-01-01","2022-08-08",t.vmType,t.nodeId,t.createUserId);case 20:a=e.sent,console.log(a),n.dataInfo=a.data;case 23:case"end":return e.stop()}}),e)})))()},handleCurrentChange:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function n(){var a;return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("当前页: ".concat(e)),n.next=3,Object(i["n"])(e);case 3:a=n.sent,t.tableData=a.data.currentPageRecords,t.pageInfo.pageIndex=e;case 6:case"end":return n.stop()}}),n)})))()},getSales:function(){return Object(c["a"])(Object(o["a"])().mark((function e(){var t;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["l"])();case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})))()},onClose:function(){this.dialogVisible=!1,this.policyVisible=!1,this.editvmVisible=!1},search:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["n"])("",e.formData.innerCode);case 2:n=t.sent,console.log(n),e.tableData=n.data.currentPageRecords;case 5:case"end":return t.stop()}}),t)})))()},handleChannelList:function(e,t){this.dialogVisible=!0,this.getChannelList(t.innerCode),this.type=this.tableData[e]},getChannelList:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function n(){var a;return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(i["f"])(e);case 2:a=n.sent,console.log(a),t.channelList=a.data;case 5:case"end":return n.stop()}}),n)})))()},formatter:function(e,t){return["未投放","运营","12","撤机"][e.vmStatus]},handlePolicy:function(e,t){this.policyVisible=!0,this.innerCodeList=t.innerCode,console.log(this.innerCodeList)},handleEditVm:function(e,t){var n=this;return Object(c["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.editvmVisible=!0,n.vmdata=t,e.next=4,Object(i["g"])();case 4:a=e.sent,console.log(a),n.nodelist=a.data.currentPageRecords;case 7:case"end":return e.stop()}}),e)})))()}}},$=T,E=(n("a365"),Object(p["a"])($,a,r,!1,null,"13bc6884",null));t["default"]=E.exports},"3c3f":function(e,t,n){},7017:function(e,t,n){"use strict";n.d(t,"p",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"n",(function(){return i})),n.d(t,"l",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"h",(function(){return u})),n.d(t,"k",(function(){return d})),n.d(t,"o",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"m",(function(){return b})),n.d(t,"d",(function(){return h})),n.d(t,"j",(function(){return m})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return C})),n.d(t,"g",(function(){return y}));n("99af");var a=n("b775"),r=function(e){return Object(a["a"])({url:"/api/vm-service/vmType/search",params:{name:e}})},o=function(e){return Object(a["a"])({url:"/api/vm-service/vmType/"+e,method:"DELETE"})},c=function(e){return Object(a["a"])({url:"/api/vm-service/vmType/"+e.typeId,Headers:{"Content-Type":"application/json"},method:"PUT",data:e})},i=function(e,t){return Object(a["a"])({url:"/api/vm-service/vm/search",params:{pageIndex:e,innerCode:t}})},s=function(e,t,n,r,o,c){return Object(a["a"])({url:"/api/order-service/report/skuCollect/".concat(e,"/").concat(t,"/").concat(n),data:{vmType:r,nodeId:o,createUserId:c}})},l=function(e,t,n){return Object(a["a"])({url:"/api/order-service/report/orderCount",params:{innerCode:e,start:t,end:n}})},u=function(e,t,n){return Object(a["a"])({url:"/api/order-service/report/orderAmount",params:{innerCode:e,start:t,end:n}})},d=function(e,t,n,r,o,c){return Object(a["a"])({url:"/api/task-service/task/repairCount/".concat(e,"/").concat(t,"/").concat(n),data:{vmType:r,nodeId:o,createUserId:c}})},p=function(e,t,n,r,o,c){return Object(a["a"])({url:"/api/task-service/task/supplyCount/".concat(e,"/").concat(t,"/").concat(n),data:{vmType:r,nodeId:o,createUserId:c}})},f=function(e){return Object(a["a"])({url:"/api/vm-service/channel/channelList/"+e})},b=function(e,t){return Object(a["a"])({url:"/api/vm-service/sku/search",params:{pageIndex:e,skuName:t}})},h=function(e,t){return Object(a["a"])({url:"/api/vm-service/channel/channelConfig",method:"PUT",Headers:{"Content-Type":"application/json"},data:{innerCode:e,channelList:t}})},m=function(){return Object(a["a"])({url:"/api/vm-service/policy"})},v=function(e){return Object(a["a"])({url:"/api/vm-service/vm/applyPolicy",method:"PUT",data:e})},C=function(e){return Object(a["a"])({url:"/api/vm-service/node/"+e.id,method:"PUT",data:e})},y=function(){return Object(a["a"])({url:"/api/vm-service/node/search"})}},7948:function(e,t,n){},a365:function(e,t,n){"use strict";n("3c3f")},b835:function(e,t,n){"use strict";n("d82e")},d82e:function(e,t,n){},e0c6:function(e,t,n){"use strict";n("7948")}}]);