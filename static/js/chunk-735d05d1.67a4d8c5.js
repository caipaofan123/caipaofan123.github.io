(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-735d05d1"],{"4bc3":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-button",{attrs:{type:e.btnType,icon:e.btnIcon},nativeOn:{click:function(t){return e.$emit("addRegionBtn")}}},[e._v(e._s(e.btnLabel))])},n=[],l={data:function(){return{}},props:["btnType","btnLabel","btnIcon"],created:function(){},methods:{}},o=l,i=(a("89d6"),a("2877")),s=Object(i["a"])(o,r,n,!1,null,"8f934806",null);t["a"]=s.exports},5949:function(e,t,a){"use strict";a("df9e")},"89d6":function(e,t,a){"use strict";a("9964")},"8a7e":function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return i}));var r=a("b775");function n(e,t){return Object(r["a"])({url:"/api/vm-service/node/search",params:e,data:t})}function l(e){return Object(r["a"])({url:"/api/vm-service/node/vmList/"+e})}function o(e){return Object(r["a"])({url:"/api/vm-service/node/"+e,method:"DELETE"})}function i(e,t){return Object(r["a"])({url:"/api/vm-service/node/"+e,method:"PUT",data:t})}},"8aa8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search"},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"点位搜索:"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.IptVal,callback:function(t){e.IptVal=t},expression:"IptVal"}})],1),a("el-form-item",{attrs:{label:"区域搜索:"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.tableData,(function(e,t){return a("el-option",{key:t,attrs:{label:e.region.name,value:e.region.id}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},nativeOn:{click:function(t){return e.searchBtn(t)}}},[e._v("查询")])],1)],1)],1),a("div",{staticClass:"result"},[a("el-button",{attrs:{type:"warning",icon:"el-icon-circle-plus-outline"},nativeOn:{click:function(t){return e.addNode(t)}}},[e._v("新增")]),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{index:e.indexMethod,type:"index",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"name",label:"点位名称",width:"270"}}),a("el-table-column",{attrs:{prop:"region[name]",label:"所在区域",width:"270"}}),a("el-table-column",{attrs:{prop:"businessType[name]",label:"商圈类型",width:"270"}}),a("el-table-column",{attrs:{prop:"ownerName",label:"合作商",width:"270"}}),a("el-table-column",{attrs:{prop:"addr",label:"详细地址",formatter:e.formatter,width:"270"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.detailBtn(t)}}},[e._v(" 查看详情 ")]),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return e.changeNode(t)}}},[e._v(" 修改 ")]),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.deleteRow(t)}}},[e._v(" 移除 ")])]}}])})],1)],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"",layout:"total,prev,pager,next",total:e.totalCount,size:e.pageSize,"prev-text":"上一页","next-text":"下一页","current-page":e.pageIndex},on:{"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t},"prev-click":function(t){return e.searchBtn(e.pageIndex-1)},"next-click":function(t){return e.searchBtn(e.pageIndex+1)}}})],1),a("el-dialog",{attrs:{title:e.activeTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"点位名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"所在区域","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},e._l(this.tableData,(function(e,t){return a("el-option",{key:t,attrs:{label:e.region.name,value:e.region.name}})})),1)],1),a("el-form-item",{attrs:{label:"所属商圈","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.businessArea,callback:function(t){e.$set(e.form,"businessArea",t)},expression:"form.businessArea"}},e._l(this.tableData,(function(e,t){return a("el-option",{key:t,attrs:{label:e.businessType.name,value:e.businessType.id}})})),1)],1),a("el-form-item",{attrs:{label:"归属合作商","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.partner,callback:function(t){e.$set(e.form,"partner",t)},expression:"form.partner"}},e._l(this.newOwnerArrs,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"详细地址","label-width":e.formLabelWidth}},[a("el-cascader",{attrs:{options:e.cityData},model:{value:e.addCascaderVal,callback:function(t){e.addCascaderVal=t},expression:"addCascaderVal"}})],1),a("el-form-item",[a("el-input",{attrs:{type:"textarea",placeholder:"请输入详细地址"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.searchBtn(t)}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"点击详情",visible:e.dialogTableVisible,width:"40%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{attrs:{data:e.nodeDetail}},[a("el-table-column",{attrs:{label:"序号",type:"index"}}),a("el-table-column",{attrs:{property:"innerCode",label:"机器编号",width:"200"}}),a("el-table-column",{attrs:{property:"vmStatus",label:"设备状态",formatter:e.formatterStatus}}),a("el-table-column",{attrs:{property:"lastSupplyTime",label:"最后一次供货时间",formatter:e.formatterTime}})],1)],1)],1)])},n=[],l=a("c7eb"),o=a("1da1"),i=(a("a9e3"),a("d3b7"),a("159b"),a("a630"),a("3ca3"),a("6062"),a("ddb0"),a("fb6a"),a("ac1f"),a("1276"),a("b0c0"),a("4bc3")),s=a("5a0c"),c=a.n(s),u=a("ef6c"),d=a("8a7e"),b={data:function(){return{IptVal:"",tableData:[],totalCount:0,pageSize:"",pageIndex:"",value:"",activeTitle:"",dialogFormVisible:!1,formLabelWidth:"100px",form:{name:"",region:"",businessArea:"",partner:"",addr:"",desc:""},newOwnerArrs:[],nodeDetail:[],dialogTableVisible:!1,cityData:u["regionData"],addCascaderVal:""}},components:{headBtn:i["a"]},created:function(){this.searchBtn()},methods:{indexMethod:function(e){return e+10*(this.pageIndex-1)+1},searchBtn:function(e){var t=this;return Object(o["a"])(Object(l["a"])().mark((function a(){var r,n,o,i,s,c,u,b,m;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.pageIndex=e,r={pageIndex:t.pageIndex,pageSize:t.pageSize,IptVal:t.IptVal,selectVal:t.selectVal},{},a.next=5,Object(d["d"])(r);case 5:n=a.sent,o=n.data,i=o.currentPageRecords,s=o.pageIndex,c=o.pageSize,u=o.totalCount,o.totalPage,console.log(i),t.tableData=i,t.totalCount=Number(u),t.pageSize=Number(c),t.pageIndex=Number(s),console.log(t.pageIndex),console.log(t.tableData),b=[],t.tableData.forEach((function(e){b.push(e.ownerName)})),m=Array.from(new Set(b)),t.newOwnerArrs=m;case 23:case"end":return a.stop()}}),a)})))()},formatter:function(e,t){return e.addr.split("-").slice(-1)},addNode:function(){var e=this;return Object(o["a"])(Object(l["a"])().mark((function t(){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.dialogFormVisible=!0,e.activeTitle="添加点位",e.form={};case 3:case"end":return t.stop()}}),t)})))()},detailBtn:function(e){var t=this;return Object(o["a"])(Object(l["a"])().mark((function a(){var r;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(e),a.next=3,Object(d["a"])(e.row.id);case 3:r=a.sent,t.nodeDetail=r.data,t.dialogTableVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},formatterStatus:function(e,t){switch(e.vmStatus){case 0:e.vmStatus="未投放";break;case 1:e.vmStatus="运营";break;case 3:e.vmStatus="撤机";break}return e.vmStatus},formatterTime:function(e,t){return console.log(c()().format("YYYY.MM.DD HH:mm:ss")),c()(e.createTime).format("YYYY.MM.DD HH:mm:ss")},deleteRow:function(e){var t=this;return Object(o["a"])(Object(l["a"])().mark((function a(){return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(d["c"])(e.row.id);case 3:a.sent,a.next=9;break;case 6:a.prev=6,a.t0=a["catch"](0),t.$message({showClose:!0,message:"演示系统，不支持此操作",type:"warning"});case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))()},changeNode:function(e){var t=this;return Object(o["a"])(Object(l["a"])().mark((function a(){var r,n;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={name:e.row.name,addr:e.row.addr,areaCode:e.row.areaCode,createUserId:e.row.createUserId,regionId:e.row.regionId,businessId:e.row.businessId,ownerId:e.row.ownerId,ownerName:e.row.ownerName},a.next=3,Object(d["b"])(e.row.id,r);case 3:n=a.sent,console.log(n),console.log(e),t.dialogFormVisible=!0,t.activeTitle="修改点位",t.form.name=e.row.name,t.form.region=e.row.region.name,t.form.businessArea=e.row.businessType.name,t.form.partner=e.row.ownerName,t.form.addr=e.row.addr,t.form.desc=e.row.addr.split("-").slice(-1);case 14:case"end":return a.stop()}}),a)})))()}}},m=b,f=(a("5949"),a("2877")),p=Object(f["a"])(m,r,n,!1,null,"a506feda",null);t["default"]=p.exports},9964:function(e,t,a){},df9e:function(e,t,a){}}]);