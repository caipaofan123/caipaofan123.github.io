(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03bb1a37"],{2446:function(e,t,a){"use strict";a("b144")},"4bc3":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-button",{attrs:{type:e.btnType,icon:e.btnIcon},nativeOn:{click:function(t){return e.$emit("addRegionBtn")}}},[e._v(e._s(e.btnLabel))])},r=[],i={data:function(){return{}},props:["btnType","btnLabel","btnIcon"],created:function(){},methods:{}},o=i,l=(a("89d6"),a("2877")),c=Object(l["a"])(o,n,r,!1,null,"8f934806",null);t["a"]=c.exports},"4de4":function(e,t,a){"use strict";var n=a("23e7"),r=a("b727").filter,i=a("1dde"),o=a("ae40"),l=i("filter"),c=o("filter");n({target:"Array",proto:!0,forced:!l||!c},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},"52ad":function(e,t,a){},"73df":function(e,t,a){"use strict";a("52ad")},"89d6":function(e,t,a){"use strict";a("9964")},"8a7e":function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return l}));var n=a("b775");function r(e,t){return Object(n["a"])({url:"/api/vm-service/node/search",params:e,data:t})}function i(e){return Object(n["a"])({url:"/api/vm-service/node/vmList/"+e})}function o(e){return Object(n["a"])({url:"/api/vm-service/node/"+e,method:"DELETE"})}function l(e,t){return Object(n["a"])({url:"/api/vm-service/node/"+e,method:"PUT",data:t})}},9964:function(e,t,a){},a9e3:function(e,t,a){"use strict";var n=a("83ab"),r=a("da84"),i=a("94ca"),o=a("6eeb"),l=a("5135"),c=a("c6b6"),s=a("7156"),u=a("c04e"),d=a("d039"),f=a("7c73"),b=a("241c").f,m=a("06cf").f,p=a("9bf2").f,g=a("58a8").trim,h="Number",v=r[h],x=v.prototype,I=c(f(x))==h,w=function(e){var t,a,n,r,i,o,l,c,s=u(e,!1);if("string"==typeof s&&s.length>2)if(s=g(s),t=s.charCodeAt(0),43===t||45===t){if(a=s.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(s.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+s}for(i=s.slice(2),o=i.length,l=0;l<o;l++)if(c=i.charCodeAt(l),c<48||c>r)return NaN;return parseInt(i,n)}return+s};if(i(h,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var N,O=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof O&&(I?d((function(){x.valueOf.call(a)})):c(a)!=h)?s(new v(w(t)),a,O):w(t)},k=n?b(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),j=0;k.length>j;j++)l(v,N=k[j])&&!l(O,N)&&p(O,N,m(v,N));O.prototype=x,x.constructor=O,o(r,h,O)}},b144:function(e,t,a){},fef5:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search"},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:e.labelName}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.headIptVal,callback:function(t){e.headIptVal=t},expression:"headIptVal"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},nativeOn:{click:function(t){return e.searchRegion(t)}}},[e._v("查询")])],1)],1)],1),a("div",{staticClass:"result"},[a("div",[a("headBtn",{attrs:{btnType:e.mainBtnType,btnLabel:e.mainBtnLabelName,btnIcon:e.mainBtnIcon},on:{addRegionBtn:e.addRegion}})],1),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{ref:"getIndex",attrs:{index:e.indexMethod,type:"index",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"name",label:"区域名称",width:"450"}}),a("el-table-column",{attrs:{prop:"nodeCount",label:"点位数",width:"450"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注说明",width:"450"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.detailBtn(t)}}},[e._v(" 查看详情 ")]),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.addRegion(t)}}},[e._v(" 修改 ")]),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.deleteRow(t.$index,e.tableData,t)}}},[e._v(" 移除 ")])]}}])})],1)],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"",layout:"total,prev, pager, next",total:e.totalCount,size:e.pageSize,"prev-text":"上一页","next-text":"下一页","current-page":e.pageIndex},on:{"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t},"prev-click":function(t){return e.getRegionList(e.pageIndex-1)},"next-click":function(t){return e.getRegionList(e.pageIndex+1)}}})],1)]),a("el-dialog",{attrs:{title:e.titleName,visible:e.dialogFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"区域名称："}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入",maxlength:"10","show-word-limit":"","label-width":e.formLabelWidth},model:{value:e.form.regionName,callback:function(t){e.$set(e.form,"regionName",t)},expression:"form.regionName"}})],1),a("el-form-item",{attrs:{label:"备注说明："}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:3},placeholder:"请输入备注(不超过40字)",maxlength:"40","show-word-limit":"","label-width":e.formLabelWidth},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.addConfirm(t)}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"区域详情",visible:e.dialogTableVisible,width:"30%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-form",{ref:"form",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"区域名称:"}},[a("div",[e._v(e._s(e.form.regionName))])]),a("el-form-item",{attrs:{label:"包含点位:"}},[a("el-table",{attrs:{data:e.dataObj}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),a("el-table-column",{attrs:{property:"name",label:"点位名称",width:"150"}}),a("el-table-column",{attrs:{property:"vmCount",label:"设备数量",width:"150"}})],1)],1)],1)],1)],1)},r=[],i=a("c7eb"),o=a("1da1"),l=(a("a9e3"),a("b0c0"),a("4de4"),a("d3b7"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form-item",{attrs:{label:e.label}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.headInput,callback:function(t){e.headInput=t},expression:"headInput"}})],1)}),c=[],s={data:function(){return{headInput:""}},props:{label:{default:"****",type:String}},created:function(){},methods:{}},u=s,d=(a("2446"),a("2877")),f=Object(d["a"])(u,l,c,!1,null,"5cee413c",null),b=f.exports,m=a("4bc3"),p=a("b775");function g(e,t,a){return Object(p["a"])({url:"/api/vm-service/region/search",method:"get",params:{pageIndex:e,pageSize:t,name:a}})}function h(e){return Object(p["a"])({url:"/api/vm-service/region",method:"POST",data:e})}function v(e){return Object(p["a"])({url:"/api/vm-service/region/"+e,method:"DELETE"})}function x(e,t){return Object(p["a"])({url:"/api/vm-service/region/"+e,method:"PUT",data:t})}var I=a("8a7e"),w={data:function(){return{labelName:"区域搜索:",mainBtnType:"warning",mainBtnLabelName:"新增",mainBtnIcon:"el-icon-circle-plus-outline",regionListData:{},tableData:[],pageIndex:"",pageSize:"",name:"",totalCount:0,dialogFormVisible:!1,dialogTableVisible:!1,formLabelWidth:"120px",titleName:"",form:{regionName:"",remark:""},flag:"",regionId:"",headIptVal:"",dataObj:{}}},components:{headInput:b,headBtn:m["a"]},created:function(){this.getRegionList()},methods:{indexMethod:function(e){return e+(this.pageIndex-1)*this.pageSize+1},getRegionList:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function a(){var n,r;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.pageIndex=e,a.next=3,g(t.pageIndex,t.pageSize,t.headIptVal);case 3:n=a.sent,r=n.data,console.log(r),t.regionListData=r,t.tableData=r.currentPageRecords,t.totalCount=Number(r.totalCount),t.pageSize=Number(r.pageSize),t.pageIndex=Number(r.pageIndex);case 11:case"end":return a.stop()}}),a)})))()},addRegion:function(e){e?(this.form.regionName=e.row.name,this.form.remark=e.row.remark,this.regionId=e.row.id,this.titleName="修改区域",this.flag=!0):(this.form={},this.titleName="新增区域",this.flag=!1),this.dialogFormVisible=!0},addConfirm:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e.flag),!e.flag){t.next=9;break}return t.next=4,x(e.regionId,e.form);case 4:a=t.sent,console.log(a),e.getRegionList(e.pageIndex),t.next=13;break;case 9:return e.dialogFormVisible=!1,t.next=12,h(e.form);case 12:e.getRegionList(e.pageIndex);case 13:case"end":return t.stop()}}),t)})))()},deleteRow:function(e,t,a){var n=this;return Object(o["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n.tableData=n.tableData.filter((function(e){return e.id!==a.row.id})),e.next=4,v(a.row.id);case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},detailBtn:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function a(){var n,r;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.form.regionName=e.row.name,n={regionId:e.row.id},a.next=4,Object(I["d"])(n);case 4:r=a.sent,console.log(r),t.dataObj=r.data.currentPageRecords,t.dialogTableVisible=!0;case 8:case"end":return a.stop()}}),a)})))()},searchRegion:function(){this.getRegionList()}}},N=w,O=(a("73df"),Object(d["a"])(N,n,r,!1,null,"7663186b",null));t["default"]=O.exports}}]);